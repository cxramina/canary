import { upperFirst, camelCase } from 'lodash-es'

export const renderComponent = ({ iconSetName, iconName, svg, size, strokeWidth }) =>
  `// This file is automatically generated. Modifying its content manually is discouraged.
import { registerIcon } from '@harnessio/svg-icon'
import type { IconProps } from '@harnessio/svg-icon-react'
import { Icon } from '@harnessio/svg-icon-react'

const name = '${iconName}${iconSetName ? '/' + iconSetName : ''}'

registerIcon(
  name,
  \`${svg}\`
)

export function ${componentName(iconName)}(props: IconProps) {
  return <Icon name={name} size="${size}" strokeWidth="${strokeWidth}" {...props} />
}`

export const renderIndex = iconNames =>
  `// This file is automatically generated. Modifying its content manually is discouraged.
${iconNames
  .map(iconName => componentName(iconName))
  .sort()
  .map(componentName => `export { ${componentName} } from './${componentName}'`)
  .join('\r\n')}`

export const componentFile = iconName => `${componentName(iconName)}.tsx`

export const INDEX_FILE = 'index.ts'

const componentName = iconName => {
  const name = upperFirst(camelCase(iconName))
  return /^\d/.test(name) ? `Svg${name}` : name // Prefix `Svg` to component name if it starts with a number
}
